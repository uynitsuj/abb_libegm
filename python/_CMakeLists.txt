# python/CMakeLists.txt

cmake_minimum_required(VERSION 3.10)

# Find required packages
find_package(Python COMPONENTS Interpreter Development REQUIRED)
find_package(pybind11 REQUIRED)
find_package(Boost REQUIRED COMPONENTS system thread)

# Create the binding module
#pybind11_add_module(_abb_libegm
#    bindings.cpp
#    controller.cpp
#    common.cpp
#    udp.cpp
#)

python_add_library(_abb_libegm MODULE udp.cpp 
controller.cpp
common.cpp 
bindings.cpp
WITH_SOABI)

target_link_libraries(_abb_libegm PRIVATE pybind11::headers)

target_compile_definitions(_abb_libegm PRIVATE VERSION_INFO=${PROJECT_VERSION})

install(TARGETS _abb_libegm DESTINATION abb_libegm)